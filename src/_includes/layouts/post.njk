---
layout: layouts/base.njk
---
{% from "_components/index.njk" import button, badge, authorCard %}

{# Hero with blended image + parallax #}
{% set gradientAngle = range(0, 360) | random %}
<section
  class="relative py-16 md:py-24 overflow-hidden min-h-[350px] flex items-center"
  style="background: linear-gradient({{ gradientAngle }}deg, oklch(0.32 0.15 295), oklch(0.40 0.2 280), oklch(0.35 0.18 310));"
  x-data="{ scrollY: 0 }"
  @scroll.window="scrollY = window.scrollY"
>
  {# Background image with parallax #}
  {% if image %}
    <div class="absolute inset-0">
      <img
        src="{{ image }}"
        alt=""
        class="w-full h-full object-cover opacity-30 mix-blend-overlay scale-110"
        :style="'transform: translateY(' + (scrollY * 0.4) + 'px) scale(1.1)'"
        loading="eager"
        eleventy:widths="1200"
      >
      <div class="absolute inset-0 bg-primary-900/50"></div>
    </div>
  {% else %}
    {# Decorative elements when no image #}
    <div class="absolute top-0 right-0 w-96 h-96 bg-primary-600 rounded-full -translate-y-1/2 translate-x-1/2 opacity-40"></div>
    <div class="absolute bottom-0 left-0 w-64 h-64 bg-primary-800 rounded-full translate-y-1/2 -translate-x-1/3 opacity-40"></div>
  {% endif %}

  <div class="container relative text-center max-w-4xl">
    {# Tags #}
    {% if tags and tags.length > 0 %}
      <div class="flex flex-wrap justify-center gap-2 mb-4">
        {% for tag in tags %}
          {% if tag !== "blog" %}
            <span class="px-3 py-1 text-xs font-medium bg-white/20 text-white rounded-full">{{ tag }}</span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    {# Title #}
    <h1 class="text-3xl md:text-5xl font-bold text-white text-balance max-w-3xl mx-auto">{{ title }}</h1>

    {% if description %}
      <p class="mt-4 text-xl text-primary-100 text-pretty max-w-2xl mx-auto">
        {{ description }}
      </p>
    {% endif %}

    {# Meta info #}
    <div class="flex flex-wrap justify-center items-center gap-4 mt-6 text-sm text-primary-200">
      {% if date %}
        <time datetime="{{ date | dateToISOString }}">
          {{ date | readableDate }}
        </time>
      {% endif %}

      {% if author %}
        {% set authorData = author | getAuthor(collections.authors) %}
        {% if authorData %}
          <span class="flex items-center gap-2">
            <span>by</span>
            <a href="/authors/{{ author }}/" class="font-medium text-white hover:underline">
              {{ authorData.data.name }}
            </a>
          </span>
        {% endif %}
      {% endif %}
    </div>
  </div>
</section>

<article class="section">
  <div class="container max-w-4xl">
    {# Back link #}
    <nav class="mb-8">
      <a href="/blog/" class="inline-flex items-center gap-2 text-sm text-zinc-600 hover:text-primary-700 transition-colors no-underline hc:text-zinc-800">
        {% phosphor "arrow-left", "bold", { size: 16 } %}
        <span>Back to Blog</span>
      </a>
    </nav>

    {# Post content #}
    <div class="prose prose-lg mx-auto">
      {{ content | safe }}
    </div>

    {# Author card #}
    {% if author %}
      {% set authorData = author | getAuthor(collections.authors) %}
      {% if authorData %}
        <footer class="mt-16 pt-8 border-t border-zinc-200 hc:border-zinc-400">
          <h2 class="text-lg font-semibold text-zinc-900 mb-4">About the Author</h2>
          {{ authorCard({
            name: authorData.data.name,
            bio: authorData.data.bio,
            avatar: authorData.data.avatar,
            url: "/authors/" + author + "/",
            twitter: authorData.data.twitter,
            linkedin: authorData.data.linkedin,
            github: authorData.data.github
          }) }}
        </footer>
      {% endif %}
    {% endif %}
  </div>
</article>
